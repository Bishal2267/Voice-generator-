<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Generate clear and clean voices for your content, similar to fact channels on YouTube and Instagram.">
    <meta name="keywords" content="voice generator, text to speech, TTS, AI voice, clean voice, fact channel voice, audio generator">
    <meta name="author" content="AI Voice Generator">
    <title>AI Voice Generator</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for social icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5;
            color: #333;
        }
        /* Custom styles for better aesthetics */
        .btn-primary {
            background-color: #4f46e5;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s ease-in-out;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .btn-primary:hover {
            background-color: #4338ca;
        }
        .btn-secondary {
            background-color: #6b7280;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s ease-in-out;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .btn-secondary:hover {
            background-color: #4b5563;
        }
        .card {
            background-color: white;
            border-radius: 1rem;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
            padding: 2rem;
        }
        .nav-link {
            color: #4a5568;
            transition: color 0.2s ease-in-out;
        }
        .nav-link:hover {
            color: #4f46e5;
        }
        .footer-link {
            color: #cbd5e0;
            transition: color 0.2s ease-in-out;
        }
        .footer-link:hover {
            color: #ffffff;
        }
        .social-icon {
            color: #cbd5e0;
            transition: color 0.2s ease-in-out;
        }
        .social-icon:hover {
            color: #ffffff;
        }
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #4f46e5;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
    <!-- Homebrew icon for mobile devices (SVG example) -->
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5'%3E%3C/path%3E%3C/svg%3E">
</head>
<body class="flex flex-col min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-md py-4 px-6 md:px-8 lg:px-12">
        <nav class="container mx-auto flex justify-between items-center flex-wrap">
            <!-- Site Name and Logo -->
            <div class="flex items-center space-x-2 mb-4 md:mb-0">
                <svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c-1.38 0-2.71-.48-4-1.35C2.71 16.12 2 15.13 2 14c0-1.13.71-2.12 2-2.75 1.29-.63 2.62-1.35 4-1.35s2.71.72 4 1.35c1.29.63 2 1.62 2 2.75 0 1.13-.71 2.12-2 2.75-1.29-.63-2.62 1.35-4 1.35zM12 2L2 7l10 5 10-5-10-5z"></path>
                </svg>
                <span class="text-2xl font-bold text-gray-800">VoiceGenius</span>
            </div>

            <!-- Mobile Menu Button -->
            <button id="mobile-menu-button" class="md:hidden text-gray-600 hover:text-indigo-600 focus:outline-none focus:text-indigo-600">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                </svg>
            </button>

            <!-- Navigation Links -->
            <div id="nav-links" class="hidden md:flex flex-col md:flex-row md:space-x-8 text-lg font-medium w-full md:w-auto mt-4 md:mt-0">
                <a href="#" class="nav-link py-2 md:py-0" data-page="home">Home</a>
                <a href="#" class="nav-link py-2 md:py-0" data-page="about">About Us</a>
                <a href="#" class="nav-link py-2 md:py-0" data-page="contact">Contact Us</a>
                <a href="#" class="nav-link py-2 md:py-0" data-page="terms">Terms & Conditions</a>
            </div>
        </nav>
    </header>

    <!-- Main Content Area -->
    <main id="main-content" class="flex-grow container mx-auto p-6 md:p-8 lg:p-12">
        <!-- Content will be loaded here by JavaScript -->
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-gray-300 py-8 px-6 md:px-8 lg:px-12">
        <div class="container mx-auto grid grid-cols-1 md:grid-cols-3 gap-8">
            <!-- Section 1: Site Name and Logo -->
            <div class="flex flex-col items-center md:items-start text-center md:text-left">
                <div class="flex items-center space-x-2 mb-2">
                    <svg class="w-8 h-8 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c-1.38 0-2.71-.48-4-1.35C2.71 16.12 2 15.13 2 14c0-1.13.71-2.12 2-2.75 1.29-.63 2.62-1.35 4-1.35s2.71.72 4 1.35c1.29.63 2 1.62 2 2.75 0 1.13-.71 2.12-2 2.75-1.29-.63-2.62 1.35-4 1.35zM12 2L2 7l10 5 10-5-10-5z"></path>
                </svg>
                <span class="text-2xl font-bold text-white">VoiceGenius</span>
            </div>
                <p class="text-sm">Your ultimate AI voice generation tool.</p>
            </div>

            <!-- Section 2: Pages -->
            <div class="flex flex-col items-center md:items-start text-center md:text-left">
                <h3 class="text-lg font-semibold text-white mb-4">Pages</h3>
                <ul class="space-y-2">
                    <li><a href="#" class="footer-link" data-page="home">Home</a></li>
                    <li><a href="#" class="footer-link" data-page="about">About Us</a></li>
                    <li><a href="#" class="footer-link" data-page="contact">Contact Us</a></li>
                    <li><a href="#" class="footer-link" data-page="terms">Terms & Conditions</a></li>
                </ul>
            </div>

            <!-- Section 3: Social Icons -->
            <div class="flex flex-col items-center md:items-start text-center md:text-left">
                <h3 class="text-lg font-semibold text-white mb-4">Follow Us</h3>
                <div class="flex space-x-4">
                    <a href="#" class="social-icon text-2xl"><i class="fab fa-facebook"></i></a>
                    <a href="#" class="social-icon text-2xl"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-icon text-2xl"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-icon text-2xl"><i class="fab fa-linkedin"></i></a>
                </div>
            </div>
        </div>

        <!-- Copyright -->
        <div class="mt-8 pt-4 border-t border-gray-700 text-center text-sm text-gray-400">
            &copy; <span id="current-year"></span> VoiceGenius. All rights reserved.
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mainContent = document.getElementById('main-content');
            const navLinks = document.getElementById('nav-links');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const currentYearSpan = document.getElementById('current-year');

            // Set current year in footer
            currentYearSpan.textContent = new Date().getFullYear();

            // Mobile menu toggle
            mobileMenuButton.addEventListener('click', () => {
                navLinks.classList.toggle('hidden');
                navLinks.classList.toggle('flex');
            });

            // Function to load page content
            function loadPage(page) {
                let content = '';
                switch (page) {
                    case 'home':
                        content = `
                            <div class="card max-w-3xl mx-auto p-6 md:p-8">
                                <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-6 text-center">Generate Your Voice</h1>
                                <p class="text-gray-600 mb-6 text-center">Enter text below and select a voice to generate clear and clean audio, perfect for fact channels and professional content.</p>

                                <!-- Voice Selection Section -->
                                <div class="mb-6">
                                    <label for="voice-select" class="block text-gray-700 text-sm font-bold mb-2">Select Voice:</label>
                                    <select id="voice-select" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                        <!-- Best human-sounding voices prioritized at the top -->
                                        <option value="Kore" selected>Kore (Firm & Clear)</option>
                                        <option value="Charon">Charon (Informative)</option>
                                        <option value="Iapetus">Iapetus (Clear)</option>
                                        <option value="Algieba">Algieba (Smooth)</option>
                                        <option value="Despina">Despina (Smooth)</option>
                                        <option value="Erinome">Erinome (Clear)</option>
                                        <option value="Rasalgethi">Rasalgethi (Informative)</option>
                                        <option value="Achernar">Achernar (Soft)</option>
                                        <option value="Alnilam">Alnilam (Firm)</option>
                                        <option value="Schedar">Schedar (Even)</option>
                                        <option value="Gacrux">Gacrux (Mature)</option>
                                        <option value="Sulafat">Sulafat (Warm)</option>
                                        <!-- Other voices follow -->
                                        <option value="Orus">Orus (Strong)</option>
                                        <option value="Zephyr">Zephyr (Bright)</option>
                                        <option value="Puck">Puck (Upbeat)</option>
                                        <option value="Fenrir">Fenrir (Excitable)</option>
                                        <option value="Leda">Leda (Youthful)</option>
                                        <option value="Aoede">Aoede (Breezy)</option>
                                        <option value="Callirrhoe">Callirrhoe (Easy-going)</option>
                                        <option value="Autonoe">Autonoe (Bright)</option>
                                        <option value="Enceladus">Enceladus (Breathy)</option>
                                        <option value="Umbriel">Umbriel (Easy-going)</option>
                                        <option value="Pulcherrima">Pulcherrima (Forward)</option>
                                        <option value="Achird">Achird (Friendly)</option>
                                        <option value="Zubenelgenubi">Zubenelgenubi (Casual)</option>
                                        <option value="Vindemiatrix">Vindemiatrix (Gentle)</option>
                                        <option value="Sadachbia">Sadachbia (Lively)</option>
                                        <option value="Sadaltager">Sadaltager (Knowledgeable)</option>
                                        <option value="Laomedeia">Laomedeia (Upbeat)</option>
                                    </select>
                                </div>

                                <textarea id="text-input" class="w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 mb-6 resize-y" rows="8" placeholder="Enter text here..."></textarea>
                                <div class="flex flex-col sm:flex-row justify-center items-center space-y-4 sm:space-y-0 sm:space-x-4 mb-6">
                                    <button id="generate-button" class="btn-primary flex items-center justify-center w-full sm:w-auto">
                                        Generate Voice
                                        <div id="loading-spinner" class="loading-spinner ml-2 hidden"></div>
                                    </button>
                                    <audio id="audio-player" controls class="w-full sm:w-auto mt-4 sm:mt-0 hidden"></audio>
                                    <!-- Download Button -->
                                    <button id="download-button" class="btn-secondary flex items-center justify-center w-full sm:w-auto hidden">
                                        <i class="fas fa-download mr-2"></i> Download Voice
                                    </button>
                                </div>
                                <div id="error-message" class="text-red-600 text-center mt-4 hidden"></div>
                            </div>
                        `;
                        break;
                    case 'about':
                        content = `
                            <div class="card max-w-3xl mx-auto p-6 md:p-8">
                                <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-6 text-center">About VoiceGenius</h1>
                                <p class="text-gray-700 mb-4">VoiceGenius is an innovative platform dedicated to providing high-quality, clear, and natural-sounding voice generation. Our advanced AI models are trained to produce voices that are ideal for various applications, including educational content, documentaries, social media fact channels, and professional presentations.</p>
                                <p class="text-gray-700 mb-4">We believe in making powerful voice technology accessible to everyone, helping creators and businesses deliver their messages with clarity and impact. Our mission is to simplify the process of voice creation, allowing you to focus on your content while we handle the audio.</p>
                                <p class="text-gray-700">With VoiceGenius, you can transform your text into engaging audio, ensuring your audience receives information in a clear, concise, and professional manner.</p>
                            </div>
                        `;
                        break;
                    case 'contact':
                        content = `
                            <div class="card max-w-3xl mx-auto p-6 md:p-8">
                                <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-6 text-center">Contact Us</h1>
                                <p class="text-gray-700 mb-6 text-center">Have questions or feedback? We'd love to hear from you!</p>
                                <form class="space-y-4">
                                    <div>
                                        <label for="name" class="block text-gray-700 text-sm font-bold mb-2">Name</label>
                                        <input type="text" id="name" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="Your Name">
                                    </div>
                                    <div>
                                        <label for="email" class="block text-gray-700 text-sm font-bold mb-2">Email</label>
                                        <input type="email" id="email" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="your@example.com">
                                    </div>
                                    <div>
                                        <label for="message" class="block text-gray-700 text-sm font-bold mb-2">Message</label>
                                        <textarea id="message" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-y" rows="6" placeholder="Your message..."></textarea>
                                    </div>
                                    <button type="submit" class="btn-primary w-full">Send Message</button>
                                </form>
                            </div>
                        `;
                        break;
                    case 'terms':
                        content = `
                            <div class="card max-w-3xl mx-auto p-6 md:p-8">
                                <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-6 text-center">Terms & Conditions</h1>
                                <div class="prose max-w-none text-gray-700">
                                    <h2 class="text-2xl font-semibold mb-3">1. Acceptance of Terms</h2>
                                    <p class="mb-4">By accessing and using VoiceGenius, you agree to be bound by these Terms and Conditions and all applicable laws and regulations. If you do not agree with any of these terms, you are prohibited from using or accessing this site.</p>

                                    <h2 class="text-2xl font-semibold mb-3">2. Use License</h2>
                                    <p class="mb-4">Permission is granted to temporarily download one copy of the materials (information or software) on VoiceGenius's website for personal, non-commercial transitory viewing only. This is the grant of a license, not a transfer of title, and under this license you may not:</p>
                                    <ul class="list-disc list-inside mb-4">
                                        <li>Modify or copy the materials;</li>
                                        <li>Use the materials for any commercial purpose, or for any public display (commercial or non-commercial);</li>
                                        <li>Attempt to decompile or reverse engineer any software contained on VoiceGenius's website;</li>
                                        <li>Remove any copyright or other proprietary notations from the materials; or</li>
                                        <li>Transfer the materials to another person or "mirror" the materials on any other server.</li>
                                    </ul>
                                    <p class="mb-4">This license shall automatically terminate if you violate any of these restrictions and may be terminated by VoiceGenius at any time.</p>

                                    <h2 class="text-2xl font-semibold mb-3">3. Disclaimer</h2>
                                    <p class="mb-4">The materials on VoiceGenius's website are provided on an 'as is' basis. VoiceGenius makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights.</p>

                                    <h2 class="text-2xl font-semibold mb-3">4. Limitations</h2>
                                    <p class="mb-4">In no event shall VoiceGenius or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption) arising out of the use or inability to use the materials on VoiceGenius's website, even if VoiceGenius or a VoiceGenius authorized representative has been notified orally or in writing of the possibility of such damage.</p>

                                    <h2 class="text-2xl font-semibold mb-3">5. Revisions and Errata</h2>
                                    <p class="mb-4">The materials appearing on VoiceGenius's website could include technical, typographical, or photographic errors. VoiceGenius does not warrant that any of the materials on its website are accurate, complete or current. VoiceGenius may make changes to the materials contained on its website at any time without notice. VoiceGenius does not, however, make any commitment to update the materials.</p>

                                    <h2 class="text-2xl font-semibold mb-3">6. Links</h2>
                                    <p class="mb-4">VoiceGenius has not reviewed all of the sites linked to its website and is not responsible for the contents of any such linked site. The inclusion of any link does not imply endorsement by VoiceGenius of the site. Use of any such linked website is at the user's own risk.</p>

                                    <h2 class="text-2xl font-semibold mb-3">7. Site Terms of Use Modifications</h2>
                                    <p class="mb-4">VoiceGenius may revise these terms of use for its website at any time without notice. By using this website you are agreeing to be bound by the then current version of these Terms and Conditions.</p>

                                    <h2 class="text-2xl font-semibold mb-3">8. Governing Law</h2>
                                    <p class="mb-4">These terms and conditions are governed by and construed in accordance with the laws of India and you irrevocably submit to the exclusive jurisdiction of the courts in that State or location.</p>
                                </div>
                            </div>
                        `;
                        break;
                }
                mainContent.innerHTML = content;
                if (page === 'home') {
                    initializeVoiceGenerator();
                }
            }

            // Initialize voice generator functionality
            function initializeVoiceGenerator() {
                const textInput = document.getElementById('text-input');
                const voiceSelect = document.getElementById('voice-select');
                const generateButton = document.getElementById('generate-button');
                const audioPlayer = document.getElementById('audio-player');
                const downloadButton = document.getElementById('download-button');
                const loadingSpinner = document.getElementById('loading-spinner');
                const errorMessage = document.getElementById('error-message');

                let currentAudioBlob = null; // To store the generated audio blob for download

                if (!generateButton) return; // Exit if not on home page

                generateButton.addEventListener('click', async () => {
                    const text = textInput.value.trim();
                    const selectedVoice = voiceSelect.value;

                    if (!text) {
                        errorMessage.textContent = 'Please enter some text to generate voice.';
                        errorMessage.classList.remove('hidden');
                        return;
                    }

                    loadingSpinner.classList.remove('hidden');
                    generateButton.disabled = true;
                    audioPlayer.classList.add('hidden');
                    downloadButton.classList.add('hidden'); // Hide download button until new audio is ready
                    errorMessage.classList.add('hidden');

                    let retries = 0;
                    const maxRetries = 5;
                    const baseDelay = 1000; // 1 second

                    while (retries < maxRetries) {
                        try {
                            // The prompt can include instructions for style/tone
                            const prompt = `Say in an informative, clear, and clean tone suitable for a fact channel: ${text}`;
                            const payload = {
                                contents: [{
                                    parts: [{ text: prompt }]
                                }],
                                generationConfig: {
                                    responseModalities: ["AUDIO"],
                                    speechConfig: {
                                        voiceConfig: {
                                            prebuiltVoiceConfig: { voiceName: selectedVoice }
                                        }
                                    }
                                },
                                model: "gemini-2.5-flash-preview-tts"
                            };

                            // API Key is automatically provided by the Canvas environment if left empty
                            const apiKey = "";
                            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`;

                            const response = await fetch(apiUrl, {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify(payload)
                            });

                            if (!response.ok) {
                                throw new Error(`HTTP error! status: ${response.status}`);
                            }

                            const result = await response.json();
                            const part = result?.candidates?.[0]?.content?.parts?.[0];
                            const audioData = part?.inlineData?.data;
                            const mimeType = part?.inlineData?.mimeType;

                            if (audioData && mimeType && mimeType.startsWith("audio/L16")) {
                                const rateMatch = mimeType.match(/rate=(\d+)/);
                                const sampleRate = rateMatch ? parseInt(rateMatch[1], 10) : 16000;

                                const pcmData = base64ToArrayBuffer(audioData);
                                const pcm16 = new Int16Array(pcmData);

                                const wavBlob = pcmToWav(pcm16, sampleRate);
                                currentAudioBlob = wavBlob; // Store the blob for download
                                const audioUrl = URL.createObjectURL(wavBlob);

                                audioPlayer.src = audioUrl;
                                audioPlayer.classList.remove('hidden');
                                downloadButton.classList.remove('hidden'); // Show download button
                                audioPlayer.play();
                                break; // Exit retry loop on success
                            } else {
                                throw new Error('Invalid audio data or MIME type received from API.');
                            }
                        } catch (error) {
                            console.error('Error generating voice:', error);
                            retries++;
                            if (retries < maxRetries) {
                                const delay = baseDelay * Math.pow(2, retries - 1);
                                await new Promise(resolve => setTimeout(resolve, delay));
                            } else {
                                errorMessage.textContent = 'Failed to generate voice after multiple attempts. Please try again later.';
                                errorMessage.classList.remove('hidden');
                            }
                        } finally {
                            loadingSpinner.classList.add('hidden');
                            generateButton.disabled = false;
                        }
                    }
                });

                // Download button event listener
                downloadButton.addEventListener('click', () => {
                    if (currentAudioBlob) {
                        const url = URL.createObjectURL(currentAudioBlob);
                        const a = document.createElement('a');
                        a.style.display = 'none';
                        a.href = url;
                        a.download = `VoiceGenius_Audio_${Date.now()}.wav`; // Dynamic filename
                        document.body.appendChild(a);
                        a.click();
                        // Clean up the URL object and the temporary anchor element
                        setTimeout(() => {
                            URL.revokeObjectURL(url);
                            document.body.removeChild(a);
                        }, 100);
                    } else {
                        errorMessage.textContent = 'No audio generated to download.';
                        errorMessage.classList.remove('hidden');
                    }
                });
            }

            // Helper function to decode base64 to ArrayBuffer
            function base64ToArrayBuffer(base64) {
                const binaryString = atob(base64);
                const len = binaryString.length;
                const bytes = new Uint8Array(len);
                for (let i = 0; i < len; i++) {
                    bytes[i] = binaryString.charCodeAt(i);
                }
                return bytes.buffer;
            }

            // Helper function to convert PCM to WAV format
            function pcmToWav(pcmData, sampleRate) {
                const numChannels = 1; // Mono audio
                const bytesPerSample = 2; // 16-bit PCM
                const blockAlign = numChannels * bytesPerSample;
                const byteRate = sampleRate * blockAlign;

                const wavHeader = new ArrayBuffer(44);
                const view = new DataView(wavHeader);

                // RIFF chunk descriptor
                writeString(view, 0, 'RIFF'); // ChunkID
                view.setUint32(4, 36 + pcmData.byteLength, true); // ChunkSize
                writeString(view, 8, 'WAVE'); // Format

                // FMT sub-chunk
                writeString(view, 12, 'fmt '); // Subchunk1ID
                view.setUint32(16, 16, true); // Subchunk1Size (16 for PCM)
                view.setUint16(20, 1, true); // AudioFormat (1 for PCM)
                view.setUint16(22, numChannels, true); // NumChannels
                view.setUint32(24, sampleRate, true); // SampleRate
                view.setUint32(28, byteRate, true); // ByteRate
                view.setUint16(32, blockAlign, true); // BlockAlign
                view.setUint16(34, 16, true); // BitsPerSample

                // DATA sub-chunk
                writeString(view, 36, 'data'); // Subchunk2ID
                view.setUint32(40, pcmData.byteLength, true); // Subchunk2Size

                const combinedBuffer = new Uint8Array(wavHeader.byteLength + pcmData.byteLength);
                combinedBuffer.set(new Uint8Array(wavHeader), 0);
                combinedBuffer.set(new Uint8Array(pcmData.buffer), wavHeader.byteLength);

                return new Blob([combinedBuffer], { type: 'audio/wav' });
            }

            function writeString(view, offset, string) {
                for (let i = 0; i < string.length; i++) {
                    view.setUint8(offset + i, string.charCodeAt(i));
                }
            }

            // Event listeners for navigation links
            document.querySelectorAll('.nav-link, .footer-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const page = e.target.dataset.page;
                    loadPage(page);
                    // Hide mobile menu after selection
                    if (!navLinks.classList.contains('hidden') && window.innerWidth < 768) {
                        navLinks.classList.add('hidden');
                        navLinks.classList.remove('flex');
                    }
                });
            });

            // Load the home page by default
            loadPage('home');
        });
    </script>
</body>
</html>

